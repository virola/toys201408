/*! betafang-fe 2014-08-25 */
define(function(require){var a,b=$("#keyword-box"),c=$("#suggest-cont"),d={};return d.request=function(a,b,c){a=a+(a.indexOf("?")>-1?"&":"?")+$.param(b),$.getJSON(a,function(a){c(0===a.status&&a.data.result instanceof Array?a.data.result:[])})},d.renderItem=function(a,b){var c=$("<span>").addClass("left sub-text").append(b.region),d=$("<span>").addClass("count right").append(b.count+" <b>套在售</b>"),e=$("<span>").addClass("left").append(b.title),f=$("<a>").addClass("clear").attr("href",b.url).append(e).append(c);return b.recently&&f.append($("<span>[最近搜过]</span>").addClass("left sub-text")),f.append(d),$("<li>").append(f).appendTo(a)},d.init=function(e){a=$.extend({},e),b=a.main?$(a.main):b,c=a.appendTo?$(a.appendTo):c;var f=a.requestOptions||{};require(["jquery-ui"],function(){$.ui.autocomplete.prototype._renderItem=d.renderItem,b.autocomplete({minLength:0,max:10,delay:300,source:function(b,c){var e=$.trim(b.term);return e?(f.keyword=e,void d.request(a.url,f,function(a){$.each(a,function(a,b){b.value||(b.value=b.keyword)}),c(a)})):void c([])},appendTo:c,position:{my:"left+1 top+14"},open:function(){var a=c.find("i");a.size()>0?a.show():c.children("ul").css({top:0})},close:function(){c.find("i").hide()}})})},d});